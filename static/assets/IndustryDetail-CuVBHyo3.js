import{d as I,a as h,B,C as R,c as m,b as t,e as s,w as e,i as v,t as n,u as A,j as S,k as V,D as _,o as f,_ as E}from"./index-BRQ1HDww.js";import{a as Y}from"./industryApi-CWVZ2pPW.js";const z={class:"industry-detail"},$={class:"page-header"},j={class:"header-content"},q={class:"page-title"},H={key:0,class:"detail-content"},M={class:"stats-section"},O={class:"stat-value"},T={class:"stat-value"},U={class:"stat-value"},G={class:"stat-value"},J={class:"stat-value"},K={class:"stock-list-section"},L={class:"section-header"},Q={class:"stock-count"},W={class:"table-container"},X=["href"],Z={class:"stock-name"},tt={class:"market-cap"},at={class:"price"},et={class:"ratio"},st={class:"ratio"},lt={key:1,class:"error-container"},ot=I({__name:"IndustryDetail",setup(nt){const k=S(),x=A(),p=h(!0),l=h(null),w=h(""),b=h("desc"),C=B(()=>!l.value||!w.value?l.value?.stocks||[]:[...l.value.stocks].sort((i,a)=>{const g=w.value;let r=i[g],d=a[g];return r==null&&(r=-1/0),d==null&&(d=-1/0),typeof r=="string"&&typeof d=="string"?b.value==="asc"?r.localeCompare(d):d.localeCompare(r):b.value==="asc"?r-d:d-r})),u=i=>i==null?"N/A":`${i.toFixed(2)}%`,P=i=>(i*.1).toFixed(2),y=()=>{x.push("/industries")},D=async()=>{try{p.value=!0;const i=decodeURIComponent(k.params.industry);if(console.log("industryName",i),!i)throw new Error("未指定行业名称");const a=await Y(i);if(a)l.value=a;else throw new Error("未找到行业数据")}catch(i){console.error("获取行业数据失败:",i),l.value=null}finally{p.value=!1}};return R(()=>{D()}),(i,a)=>{const g=v("el-button"),r=v("el-card"),d=v("el-col"),N=v("el-row"),c=v("el-table-column"),F=v("el-table");return f(),m("div",z,[t("div",$,[t("div",j,[s(g,{type:"default",size:"default",onClick:y,class:"back-button"},{icon:e(()=>[...a[0]||(a[0]=[t("span",null,"←",-1)])]),default:e(()=>[a[1]||(a[1]=V(" 返回行业分析 ",-1))]),_:1}),t("h1",q,n(l.value?.industry)+" - 行业详情",1)])]),l.value?(f(),m("div",H,[t("div",M,[s(N,{gutter:20,class:"stats-grid"},{default:e(()=>[s(d,{xs:12,sm:6,md:6,lg:6},{default:e(()=>[s(r,{class:"stat-card",shadow:"hover"},{default:e(()=>[a[2]||(a[2]=t("div",{class:"stat-label"},"行业名称",-1)),t("div",O,n(l.value.industry),1)]),_:1})]),_:1}),s(d,{xs:12,sm:6,md:6,lg:6},{default:e(()=>[s(r,{class:"stat-card",shadow:"hover"},{default:e(()=>[a[3]||(a[3]=t("div",{class:"stat-label"},"股票总数",-1)),t("div",T,n(l.value.count)+"只",1)]),_:1})]),_:1}),s(d,{xs:12,sm:6,md:6,lg:6},{default:e(()=>[s(r,{class:"stat-card",shadow:"hover"},{default:e(()=>[a[4]||(a[4]=t("div",{class:"stat-label"},"市场占比",-1)),t("div",U,n(P(l.value.count||0))+"%",1)]),_:1})]),_:1}),s(d,{xs:12,sm:6,md:6,lg:6},{default:e(()=>[s(r,{class:"stat-card",shadow:"hover"},{default:e(()=>[a[5]||(a[5]=t("div",{class:"stat-label"},"平均涨跌幅",-1)),t("div",{class:_(["stat-value",{positive:l.value.avgChangePercent>0,negative:l.value.avgChangePercent<0,neutral:l.value.avgChangePercent===0}])},n(u(l.value.avgChangePercent)),3)]),_:1})]),_:1}),s(d,{xs:12,sm:6,md:6,lg:6},{default:e(()=>[s(r,{class:"stat-card",shadow:"hover"},{default:e(()=>[a[6]||(a[6]=t("div",{class:"stat-label"},"平均PE",-1)),t("div",G,n(l.value.avgPeRatio?l.value.avgPeRatio.toFixed(2):"N/A"),1)]),_:1})]),_:1}),s(d,{xs:12,sm:6,md:6,lg:6},{default:e(()=>[s(r,{class:"stat-card",shadow:"hover"},{default:e(()=>[a[7]||(a[7]=t("div",{class:"stat-label"},"平均PB",-1)),t("div",J,n(l.value.avgPbRatio?l.value.avgPbRatio.toFixed(2):"N/A"),1)]),_:1})]),_:1}),s(d,{xs:12,sm:6,md:6,lg:6},{default:e(()=>[s(r,{class:"stat-card",shadow:"hover"},{default:e(()=>[a[8]||(a[8]=t("div",{class:"stat-label"},"60天涨跌幅",-1)),t("div",{class:_(["stat-value",{positive:l.value.avgChange60Day>0,negative:l.value.avgChange60Day<0,neutral:l.value.avgChange60Day===0}])},n(u(l.value.avgChange60Day)),3)]),_:1})]),_:1}),s(d,{xs:12,sm:6,md:6,lg:6},{default:e(()=>[s(r,{class:"stat-card",shadow:"hover"},{default:e(()=>[a[9]||(a[9]=t("div",{class:"stat-label"},"年初至今涨跌幅",-1)),t("div",{class:_(["stat-value",{positive:l.value.avgChangeYtd>0,negative:l.value.avgChangeYtd<0,neutral:l.value.avgChangeYtd===0}])},n(u(l.value.avgChangeYtd)),3)]),_:1})]),_:1})]),_:1})]),t("div",K,[t("div",L,[a[10]||(a[10]=t("h2",null,"股票列表",-1)),t("div",Q,"共 "+n(l.value.stocks?.length||0)+" 只股票",1)]),t("div",W,[s(F,{data:C.value,style:{width:"100%"},stripe:"",border:"",loading:p.value,"empty-text":"暂无股票数据"},{default:e(()=>[s(c,{prop:"code",label:"股票代码","min-width":"100",sortable:""},{default:e(o=>[t("a",{href:`https://xueqiu.com/S/SH${o.row.code}`,target:"_blank",class:"stock-code stock-link"},n(o.row.code),9,X)]),_:1}),s(c,{prop:"name",label:"股票名称","min-width":"120",sortable:""},{default:e(o=>[t("span",Z,n(o.row.name),1)]),_:1}),s(c,{prop:"total_market_cap",label:"总市值","min-width":"100",align:"center",sortable:""},{default:e(o=>[t("span",tt,n(o.row.total_market_cap?.toFixed(2)),1)]),_:1}),s(c,{prop:"latest_price",label:"最新价格","min-width":"80",align:"center",sortable:""},{default:e(o=>[t("span",at,n(o.row.latest_price?.toFixed(2)||"N/A"),1)]),_:1}),s(c,{prop:"change_percent",label:"涨跌幅","min-width":"80",align:"center",sortable:""},{default:e(o=>[t("span",{class:_(["change-value",{positive:o.row.change_percent>0,negative:o.row.change_percent<0,neutral:o.row.change_percent===0}])},n(u(o.row.change_percent)),3)]),_:1}),s(c,{prop:"pe_ratio",label:"市盈率","min-width":"70",align:"center",sortable:""},{default:e(o=>[t("span",et,n(o.row.pe_ratio?.toFixed(2)||"N/A"),1)]),_:1}),s(c,{prop:"pb_ratio",label:"市净率","min-width":"70",align:"center",sortable:""},{default:e(o=>[t("span",st,n(o.row.pb_ratio?.toFixed(2)||"N/A"),1)]),_:1}),s(c,{prop:"change_60day",label:"60天涨跌","min-width":"80",align:"center",sortable:""},{default:e(o=>[t("span",{class:_(["change-value",{positive:o.row.change_60day>0,negative:o.row.change_60day<0,neutral:o.row.change_60day===0}])},n(u(o.row.change_60day)),3)]),_:1}),s(c,{prop:"change_ytd",label:"年初至今","min-width":"80",align:"center",sortable:""},{default:e(o=>[t("span",{class:_(["change-value",{positive:o.row.change_ytd>0,negative:o.row.change_ytd<0,neutral:o.row.change_ytd===0}])},n(u(o.row.change_ytd)),3)]),_:1})]),_:1},8,["data","loading"])])])])):(f(),m("div",lt,[a[11]||(a[11]=t("div",{class:"error-message"},"未找到行业数据",-1)),t("button",{class:"retry-button",onClick:y},"返回行业分析")]))])}}}),it=E(ot,[["__scopeId","data-v-c7e228d6"]]);export{it as default};
