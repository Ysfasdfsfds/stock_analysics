import{d as le,a as m,B as f,G as se,C as oe,j as de,H as ie,I as ne,c as x,b as e,g as y,e as t,w as s,i as g,E as R,t as o,l as F,P as re,k as z,L as ue,D as v,f as ce,u as ve,o as h,_ as _e}from"./index-BRQ1HDww.js";import{T as B}from"./TrendChart-f0RR5B7j.js";import{d as pe,g as me,h as fe,i as M}from"./stockApi-Cmsf5YCS.js";const ge={class:"stock-detail","element-loading-text":"正在加载股票详情..."},he={class:"page-header"},be={class:"header-content"},we={class:"stock-info"},xe={class:"stock-title"},ye={class:"header-actions"},ke={key:0,class:"latest-data-section"},Fe={class:"metric-card"},Pe={class:"metric-card"},Ee={class:"metric-value"},Te={class:"metric-card"},De={class:"metric-value"},Ce={class:"metric-card"},Me={class:"metric-value"},Se={class:"metric-card"},Ge={class:"metric-value"},Ve={class:"metric-card"},ze={class:"metric-value"},Be={class:"metric-card"},Ne={class:"metric-value"},Ie={class:"metric-card"},je={class:"metric-value"},Re={class:"metric-card"},Ue={class:"metric-value"},He={key:1,class:"charts-section"},Le={class:"chart-header"},Oe={class:"chart-controls"},qe={class:"chart-container"},Ae={key:2,class:"fund-flow-section"},Je={class:"metric-card"},Ke={class:"metric-card"},Qe={class:"metric-card"},We={class:"metric-card"},Xe={class:"metric-card"},Ye={class:"chart-container"},Ze={class:"chart-container"},$e={key:3,class:"table-section"},ea={class:"table-header"},aa={class:"table-info"},ta={class:"price-value"},la={key:0,class:"pagination-container"},sa={key:4,class:"empty-state"},oa=le({__name:"StockDetail",setup(da){const N=de(),U=ve(),b=m(""),I=m(""),c=m([]),k=m([]),P=m(!1),E=m(1),T=m(20),S=m(["PE(TTM)","市净率","PEG值"]),D=m(""),G=m("desc"),u=f(()=>c.value.length===0?null:c.value[0]),H=f(()=>c.value.map(l=>({date:l.date,"PE(TTM)":l["PE(TTM)"],"PE(静)":l["PE(静)"],市净率:l.市净率,PEG值:l.PEG值,市现率:l.市现率,市销率:l.市销率,当日收盘价:l.当日收盘价,当日涨跌幅:l.当日涨跌幅}))),L=f(()=>[{key:"PE(TTM)",label:"PE(TTM)"},{key:"PE(静)",label:"PE(静)"},{key:"市净率",label:"市净率"},{key:"PEG值",label:"PEG值"},{key:"市现率",label:"市现率"},{key:"市销率",label:"市销率"},{key:"当日收盘价",label:"当日收盘价"}]);f(()=>c.value.map(l=>({date:l.date,总市值:l.总市值/1e8,流通市值:l.流通市值/1e8})));const O=f(()=>k.value.map(l=>({date:l.date,超大单净流入:l["超大单净流入-净额"]/1e8,大单净流入:l["大单净流入-净额"]/1e8,中单净流入:l["中单净流入-净额"]/1e8,小单净流入:l["小单净流入-净额"]/1e8,主力净流入:l["主力净流入-净额"]/1e8}))),q=f(()=>k.value.map(l=>({date:l.date,超大单净占比:l["超大单净流入-净占比"],大单净占比:l["大单净流入-净占比"],中单净占比:l["中单净流入-净占比"],小单净占比:l["小单净流入-净占比"],主力净占比:l["主力净流入-净占比"]}))),d=f(()=>k.value.length===0?null:k.value[0]),A=f(()=>D.value?[...c.value].sort((l,a)=>{const _=l[D.value],r=a[D.value];return typeof _=="string"&&typeof r=="string"?G.value==="asc"?_.localeCompare(r):r.localeCompare(_):typeof _=="number"&&typeof r=="number"?G.value==="asc"?_-r:r-_:0}):c.value),J=f(()=>{const l=(E.value-1)*T.value,a=l+T.value;return A.value.slice(l,a)}),K=f(()=>Math.ceil(c.value.length/T.value)),V=async()=>{if(b.value){P.value=!0;try{const l=await pe(b.value);c.value=l.sort((r,n)=>new Date(n.date).getTime()-new Date(r.date).getTime());const a=await me(b.value);I.value=a.name;const _=await fe(b.value);k.value=_.sort((r,n)=>new Date(n.date).getTime()-new Date(r.date).getTime()),R.success("股票数据加载成功")}catch(l){console.error("获取股票数据失败:",l),R.error("获取股票数据失败，请稍后重试")}finally{P.value=!1}}},j=()=>{V()},Q=()=>{U.back()},W=({prop:l,order:a})=>{D.value=l||"",G.value=a==="ascending"?"asc":"desc"},X=l=>{T.value=l,E.value=1},Y=l=>{E.value=l};return se(()=>N.params.code,l=>{l&&typeof l=="string"&&(b.value=l,V())},{immediate:!0}),oe(()=>{const l=N.params.code;l&&typeof l=="string"&&(b.value=l,V())}),(l,a)=>{const _=g("el-button"),r=g("el-card"),n=g("el-col"),C=g("el-row"),w=g("el-option"),Z=g("el-select"),p=g("el-table-column"),$=g("el-table"),ee=g("el-pagination"),ae=g("el-empty"),te=ne("loading");return ie((h(),x("div",ge,[e("div",he,[t(r,{shadow:"hover"},{default:s(()=>[e("div",be,[e("div",we,[e("h1",xe,o(b.value)+" "+o(I.value)+" 股票详情分析",1),a[2]||(a[2]=e("p",{class:"stock-subtitle"},"实时估值数据与历史趋势分析",-1))]),e("div",ye,[t(_,{onClick:Q,icon:F(re)},{default:s(()=>[...a[3]||(a[3]=[z("返回",-1)])]),_:1},8,["icon"]),t(_,{onClick:j,loading:P.value,icon:F(ue),type:"primary"},{default:s(()=>[...a[4]||(a[4]=[z("刷新数据",-1)])]),_:1},8,["loading","icon"])])])]),_:1})]),u.value?(h(),x("div",ke,[t(r,{shadow:"hover"},{header:s(()=>[e("h3",null,"最新估值数据 ("+o(u.value.date)+")",1)]),default:s(()=>[t(C,{gutter:20,class:"metrics-grid"},{default:s(()=>[t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Fe,[e("div",{class:v(["metric-value price",{up:u.value.当日涨跌幅>0,down:u.value.当日涨跌幅<0}])}," ¥"+o(u.value.当日收盘价.toFixed(2)),3),a[5]||(a[5]=e("div",{class:"metric-label"},"当日收盘价",-1)),e("div",{class:v(["metric-change",{up:u.value.当日涨跌幅>0,down:u.value.当日涨跌幅<0}])},o(u.value.当日涨跌幅>0?"+":"")+o(u.value.当日涨跌幅.toFixed(2))+"% ",3)])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Pe,[e("div",Ee,o(u.value["PE(TTM)"].toFixed(2)),1),a[6]||(a[6]=e("div",{class:"metric-label"},"市盈率(TTM)",-1))])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Te,[e("div",De,o(u.value["PE(静)"].toFixed(2)),1),a[7]||(a[7]=e("div",{class:"metric-label"},"市盈率(静)",-1))])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Ce,[e("div",Me,o(u.value.市净率.toFixed(2)),1),a[8]||(a[8]=e("div",{class:"metric-label"},"市净率",-1))])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Se,[e("div",Ge,o(u.value.PEG值.toFixed(2)),1),a[9]||(a[9]=e("div",{class:"metric-label"},"PEG值",-1))])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Ve,[e("div",ze,o(F(M)(u.value.总市值)),1),a[10]||(a[10]=e("div",{class:"metric-label"},"总市值",-1))])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Be,[e("div",Ne,o(F(M)(u.value.流通市值)),1),a[11]||(a[11]=e("div",{class:"metric-label"},"流通市值",-1))])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Ie,[e("div",je,o(u.value.市现率.toFixed(2)),1),a[12]||(a[12]=e("div",{class:"metric-label"},"市现率",-1))])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Re,[e("div",Ue,o(u.value.市销率.toFixed(2)),1),a[13]||(a[13]=e("div",{class:"metric-label"},"市销率",-1))])]),_:1})]),_:1})]),_:1})])):y("",!0),c.value.length>0?(h(),x("div",He,[t(C,{gutter:20},{default:s(()=>[t(n,{span:24},{default:s(()=>[t(r,{shadow:"hover"},{header:s(()=>[e("div",Le,[a[14]||(a[14]=e("h3",null,"估值指标趋势分析",-1)),e("div",Oe,[t(Z,{modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=i=>S.value=i),multiple:"",placeholder:"选择指标",style:{width:"300px"}},{default:s(()=>[t(w,{label:"PE(TTM)",value:"PE(TTM)"}),t(w,{label:"PE(静)",value:"PE(静)"}),t(w,{label:"市净率",value:"市净率"}),t(w,{label:"PEG值",value:"PEG值"}),t(w,{label:"市现率",value:"市现率"}),t(w,{label:"市销率",value:"市销率"}),t(w,{label:"当日收盘价",value:"当日收盘价"})]),_:1},8,["modelValue"])])])]),default:s(()=>[e("div",qe,[t(B,{data:H.value,"date-field":"date",yFields:L.value,defaultSelectedFields:S.value,height:"500px",title:"估值指标趋势"},null,8,["data","yFields","defaultSelectedFields"])])]),_:1})]),_:1})]),_:1})])):y("",!0),k.value.length>0?(h(),x("div",Ae,[t(C,{gutter:20},{default:s(()=>[d.value?(h(),ce(n,{key:0,span:24},{default:s(()=>[t(r,{shadow:"hover",class:"latest-fund-flow-card"},{header:s(()=>[e("h3",null,"最新资金流向数据 ("+o(d.value.date)+")",1)]),default:s(()=>[t(C,{gutter:20,class:"metrics-grid"},{default:s(()=>[t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Je,[e("div",{class:v(["metric-value",{positive:d.value["主力净流入-净额"]>0,negative:d.value["主力净流入-净额"]<0}])},o((d.value["主力净流入-净额"]/1e8).toFixed(2))+"亿 ",3),a[15]||(a[15]=e("div",{class:"metric-label"},"主力净流入",-1)),e("div",{class:v(["metric-change",{positive:d.value["主力净流入-净占比"]>0,negative:d.value["主力净流入-净占比"]<0}])},o(d.value["主力净流入-净占比"].toFixed(2))+"% ",3)])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Ke,[e("div",{class:v(["metric-value",{positive:d.value["超大单净流入-净额"]>0,negative:d.value["超大单净流入-净额"]<0}])},o((d.value["超大单净流入-净额"]/1e8).toFixed(2))+"亿 ",3),a[16]||(a[16]=e("div",{class:"metric-label"},"超大单净流入",-1)),e("div",{class:v(["metric-change",{positive:d.value["超大单净流入-净占比"]>0,negative:d.value["超大单净流入-净占比"]<0}])},o(d.value["超大单净流入-净占比"].toFixed(2))+"% ",3)])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Qe,[e("div",{class:v(["metric-value",{positive:d.value["大单净流入-净额"]>0,negative:d.value["大单净流入-净额"]<0}])},o((d.value["大单净流入-净额"]/1e8).toFixed(2))+"亿 ",3),a[17]||(a[17]=e("div",{class:"metric-label"},"大单净流入",-1)),e("div",{class:v(["metric-change",{positive:d.value["大单净流入-净占比"]>0,negative:d.value["大单净流入-净占比"]<0}])},o(d.value["大单净流入-净占比"].toFixed(2))+"% ",3)])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",We,[e("div",{class:v(["metric-value",{positive:d.value["中单净流入-净额"]>0,negative:d.value["中单净流入-净额"]<0}])},o((d.value["中单净流入-净额"]/1e8).toFixed(2))+"亿 ",3),a[18]||(a[18]=e("div",{class:"metric-label"},"中单净流入",-1)),e("div",{class:v(["metric-change",{positive:d.value["中单净流入-净占比"]>0,negative:d.value["中单净流入-净占比"]<0}])},o(d.value["中单净流入-净占比"].toFixed(2))+"% ",3)])]),_:1}),t(n,{xs:12,sm:8,md:6,lg:4},{default:s(()=>[e("div",Xe,[e("div",{class:v(["metric-value",{positive:d.value["小单净流入-净额"]>0,negative:d.value["小单净流入-净额"]<0}])},o((d.value["小单净流入-净额"]/1e8).toFixed(2))+"亿 ",3),a[19]||(a[19]=e("div",{class:"metric-label"},"小单净流入",-1)),e("div",{class:v(["metric-change",{positive:d.value["小单净流入-净占比"]>0,negative:d.value["小单净流入-净占比"]<0}])},o(d.value["小单净流入-净占比"].toFixed(2))+"% ",3)])]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),t(n,{span:24},{default:s(()=>[t(r,{shadow:"hover",class:"fund-flow-chart-card"},{header:s(()=>[...a[20]||(a[20]=[e("div",{class:"chart-header"},[e("h3",null,"资金流向趋势分析（净额）")],-1)])]),default:s(()=>[e("div",Ye,[t(B,{data:O.value,"date-field":"date",yFields:[{key:"超大单净流入",label:"超大单净流入(亿)"},{key:"大单净流入",label:"大单净流入(亿)"},{key:"中单净流入",label:"中单净流入(亿)"},{key:"小单净流入",label:"小单净流入(亿)"},{key:"主力净流入",label:"主力净流入(亿)"}],defaultSelectedFields:["超大单净流入","大单净流入","小单净流入","主力净流入"],height:"400px",title:"资金流向趋势（净额）"},null,8,["data"])])]),_:1})]),_:1}),t(n,{span:24},{default:s(()=>[t(r,{shadow:"hover",class:"fund-flow-chart-card"},{header:s(()=>[...a[21]||(a[21]=[e("div",{class:"chart-header"},[e("h3",null,"资金流向趋势分析（占比）")],-1)])]),default:s(()=>[e("div",Ze,[t(B,{data:q.value,"date-field":"date",yFields:[{key:"超大单净占比",label:"超大单净占比(%)"},{key:"大单净占比",label:"大单净占比(%)"},{key:"中单净占比",label:"中单净占比(%)"},{key:"小单净占比",label:"小单净占比(%)"},{key:"主力净占比",label:"主力净占比(%)"}],defaultSelectedFields:["超大单净占比","大单净占比","小单净占比","主力净占比"],height:"400px",title:"资金流向趋势（占比）"},null,8,["data"])])]),_:1})]),_:1})]),_:1})])):y("",!0),c.value.length>0?(h(),x("div",$e,[t(r,{shadow:"hover"},{header:s(()=>[e("div",ea,[a[22]||(a[22]=e("h3",null,"历史估值数据",-1)),e("div",aa," 共 "+o(c.value.length)+" 条记录 ",1)])]),default:s(()=>[t($,{data:J.value,style:{width:"100%"},stripe:"",border:"",onSortChange:W},{default:s(()=>[t(p,{prop:"date",label:"日期",width:"120",sortable:""}),t(p,{prop:"当日收盘价",label:"收盘价",width:"100",align:"center",sortable:""},{default:s(i=>[e("span",ta,o(i.row.当日收盘价.toFixed(2)),1)]),_:1}),t(p,{prop:"当日涨跌幅",label:"涨跌幅(%)",width:"120",align:"center",sortable:""},{default:s(i=>[e("span",{class:v(["change-value",{positive:i.row.当日涨跌幅>0,negative:i.row.当日涨跌幅<0,neutral:i.row.当日涨跌幅===0}])},o(i.row.当日涨跌幅>0?"+":"")+o(i.row.当日涨跌幅.toFixed(2))+"% ",3)]),_:1}),t(p,{prop:"PE(TTM)",label:"PE(TTM)",width:"100",align:"center",sortable:""},{default:s(i=>[e("span",null,o(i.row["PE(TTM)"].toFixed(2)),1)]),_:1}),t(p,{prop:"PE(静)",label:"PE(静)",width:"100",align:"center",sortable:""},{default:s(i=>[e("span",null,o(i.row["PE(静)"].toFixed(2)),1)]),_:1}),t(p,{prop:"市净率",label:"市净率",width:"100",align:"center",sortable:""},{default:s(i=>[e("span",null,o(i.row.市净率.toFixed(2)),1)]),_:1}),t(p,{prop:"PEG值",label:"PEG值",width:"100",align:"center",sortable:""},{default:s(i=>[e("span",null,o(i.row.PEG值.toFixed(2)),1)]),_:1}),t(p,{prop:"市现率",label:"市现率",width:"100",align:"center",sortable:""},{default:s(i=>[e("span",null,o(i.row.市现率.toFixed(2)),1)]),_:1}),t(p,{prop:"市销率",label:"市销率",width:"100",align:"center",sortable:""},{default:s(i=>[e("span",null,o(i.row.市销率.toFixed(2)),1)]),_:1}),t(p,{prop:"总市值",label:"总市值",width:"120",align:"center",sortable:""},{default:s(i=>[e("span",null,o(F(M)(i.row.总市值)),1)]),_:1}),t(p,{prop:"流通市值",label:"流通市值",width:"120",align:"center",sortable:""},{default:s(i=>[e("span",null,o(F(M)(i.row.流通市值)),1)]),_:1})]),_:1},8,["data"]),K.value>1?(h(),x("div",la,[t(ee,{"current-page":E.value,"onUpdate:currentPage":a[1]||(a[1]=i=>E.value=i),"page-size":T.value,total:c.value.length,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:X,onCurrentChange:Y},null,8,["current-page","page-size","total"])])):y("",!0)]),_:1})])):y("",!0),!P.value&&c.value.length===0?(h(),x("div",sa,[t(ae,{description:"暂无股票估值数据"},{default:s(()=>[t(_,{type:"primary",onClick:j},{default:s(()=>[...a[23]||(a[23]=[z("重新加载",-1)])]),_:1})]),_:1})])):y("",!0)])),[[te,P.value]])}}}),ua=_e(oa,[["__scopeId","data-v-6b65f6d0"]]);export{ua as default};
