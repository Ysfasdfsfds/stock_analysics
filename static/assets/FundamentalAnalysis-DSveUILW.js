import{d as Z,a as f,r as I,C as q,H as G,I as J,c as x,e,w as t,i as c,E as u,b as s,k as m,t as l,g as $,D as K,o as k,_ as L}from"./index-BRQ1HDww.js";const Q={class:"fundamental-analysis","element-loading-text":"正在加载股票数据..."},W={class:"card-header"},X={class:"header-actions"},Y={class:"analysis-content"},ee={key:0,style:{"font-size":"12px",color:"#999","margin-left":"10px"}},ae={class:"financial-indicators"},te={class:"indicator-item"},oe={class:"indicator-value"},se={class:"indicator-item"},ne={class:"indicator-value"},le={class:"indicator-item"},re={class:"indicator-value"},ce={class:"indicator-item"},ie={class:"indicator-value"},de=Z({__name:"FundamentalAnalysis",setup(pe){const p=f("000002"),C=f("balance"),h=f(!1),n=I({name:"万科A",code:"000002.SZ",industry:"房地产",marketCap:"2340.35亿",pe:4.71,pb:.53,latest_price:12.06,change_percent:-2.43}),E=f(0),A=[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],i=I({roe:0,roa:0,eps:0,book_value_per_share:0,report_date:""}),S=f([]),V=f([]),F=f([]),B=async r=>{try{const o=await(await fetch(`http://localhost:5001/api/fundamental/company-info/${r}`)).json();if(o.code===200)Object.assign(n,o.data);else throw new Error(o.message)}catch(a){console.error("获取公司信息失败:",a),u.error("获取公司信息失败")}},N=async r=>{try{const o=await(await fetch(`http://localhost:5001/api/fundamental/financial-indicators/${r}`)).json();if(o.code===200)Object.assign(i,o.data),E.value=o.data.financial_score||0;else throw new Error(o.message)}catch(a){console.error("获取财务指标失败:",a),u.error("获取财务指标失败")}},O=async r=>{try{const o=await(await fetch(`http://localhost:5001/api/fundamental/balance-sheet/${r}`)).json();if(o.code===200)S.value=o.data;else throw new Error(o.message)}catch(a){console.error("获取资产负债表失败:",a),u.error("获取资产负债表失败")}},z=async r=>{try{const o=await(await fetch(`http://localhost:5001/api/fundamental/income-statement/${r}`)).json();if(o.code===200)V.value=o.data;else throw new Error(o.message)}catch(a){console.error("获取利润表失败:",a),u.error("获取利润表失败")}},M=async r=>{try{const o=await(await fetch(`http://localhost:5001/api/fundamental/cash-flow/${r}`)).json();if(o.code===200)F.value=o.data;else throw new Error(o.message)}catch(a){console.error("获取现金流量表失败:",a),u.error("获取现金流量表失败")}},D=async()=>{if(!p.value.trim()){u.warning("请输入股票代码");return}h.value=!0;try{await Promise.all([B(p.value),N(p.value),O(p.value),z(p.value),M(p.value)]),u.success("数据加载完成")}catch(r){console.error("加载数据失败:",r),u.error("加载数据失败")}finally{h.value=!1}};return q(()=>{D()}),(r,a)=>{const o=c("el-input"),P=c("el-button"),_=c("el-descriptions-item"),R=c("el-descriptions"),b=c("el-card"),v=c("el-col"),T=c("el-progress"),j=c("el-row"),d=c("el-table-column"),g=c("el-table"),y=c("el-tab-pane"),U=c("el-tabs"),H=J("loading");return G((k(),x("div",Q,[e(b,{class:"page-header"},{header:t(()=>[s("div",W,[a[3]||(a[3]=s("span",null,"基本面分析",-1)),s("div",X,[e(o,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=w=>p.value=w),placeholder:"输入股票代码，如000002",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),e(P,{type:"primary",onClick:D,loading:h.value},{default:t(()=>[...a[2]||(a[2]=[m("查询",-1)])]),_:1},8,["loading"])])])]),default:t(()=>[s("div",Y,[e(j,{gutter:20},{default:t(()=>[e(v,{span:12},{default:t(()=>[e(b,{class:"analysis-card"},{header:t(()=>[...a[4]||(a[4]=[s("span",null,"公司基本信息",-1)])]),default:t(()=>[e(R,{column:2,border:""},{default:t(()=>[e(_,{label:"公司名称"},{default:t(()=>[m(l(n.name||"--"),1)]),_:1}),e(_,{label:"股票代码"},{default:t(()=>[m(l(n.code||"--"),1)]),_:1}),e(_,{label:"所属行业"},{default:t(()=>[m(l(n.industry||"--"),1)]),_:1}),e(_,{label:"总市值"},{default:t(()=>[m(l(n.total_market_cap?n.total_market_cap+"亿":"--"),1)]),_:1}),e(_,{label:"最新价"},{default:t(()=>[s("span",null,l(n.latest_price||"--"),1),n.change_percent?(k(),x("span",{key:0,class:K({positive:n.change_percent>0,negative:n.change_percent<0}),style:{"margin-left":"8px"}},l(n.change_percent>0?"+":"")+l(n.change_percent)+"% ",3)):$("",!0)]),_:1}),e(_,{label:"市盈率"},{default:t(()=>[m(l(n.pe_ratio||"--"),1)]),_:1}),e(_,{label:"市净率"},{default:t(()=>[m(l(n.pb_ratio||"--"),1)]),_:1}),e(_,{label:"换手率"},{default:t(()=>[m(l(n.turnover_rate?n.turnover_rate+"%":"--"),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{span:12},{default:t(()=>[e(b,{class:"analysis-card"},{header:t(()=>[a[5]||(a[5]=s("span",null,"财务指标",-1)),i.report_date?(k(),x("span",ee," ("+l(i.report_date)+") ",1)):$("",!0)]),default:t(()=>[e(T,{type:"dashboard",percentage:E.value,color:A,class:"financial-score"},null,8,["percentage"]),s("div",ae,[s("div",te,[a[6]||(a[6]=s("span",{class:"indicator-label"},"ROE (净资产收益率):",-1)),s("span",oe,l(i.roe?i.roe.toFixed(2):"--")+"%",1)]),s("div",se,[a[7]||(a[7]=s("span",{class:"indicator-label"},"ROA (总资产净利率):",-1)),s("span",ne,l(i.roa?i.roa.toFixed(2):"--")+"%",1)]),s("div",le,[a[8]||(a[8]=s("span",{class:"indicator-label"},"每股收益 (EPS):",-1)),s("span",re,l(i.eps?i.eps.toFixed(2):"--"),1)]),s("div",ce,[a[9]||(a[9]=s("span",{class:"indicator-label"},"每股净资产:",-1)),s("span",ie,l(i.book_value_per_share?i.book_value_per_share.toFixed(2):"--"),1)])])]),_:1})]),_:1})]),_:1}),e(j,{gutter:20,class:"mt-20"},{default:t(()=>[e(v,{span:24},{default:t(()=>[e(b,null,{header:t(()=>[...a[10]||(a[10]=[s("span",null,"财务报表",-1)])]),default:t(()=>[e(U,{modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=w=>C.value=w)},{default:t(()=>[e(y,{label:"资产负债表",name:"balance"},{default:t(()=>[e(g,{data:S.value,style:{width:"100%"}},{default:t(()=>[e(d,{prop:"item",label:"项目"}),e(d,{prop:"current",label:"本期金额"}),e(d,{prop:"previous",label:"上期金额"}),e(d,{prop:"change",label:"变动比例"})]),_:1},8,["data"])]),_:1}),e(y,{label:"利润表",name:"income"},{default:t(()=>[e(g,{data:V.value,style:{width:"100%"}},{default:t(()=>[e(d,{prop:"item",label:"项目"}),e(d,{prop:"amount",label:"金额"}),e(d,{prop:"percentage",label:"占比"})]),_:1},8,["data"])]),_:1}),e(y,{label:"现金流量表",name:"cashflow"},{default:t(()=>[e(g,{data:F.value,style:{width:"100%"}},{default:t(()=>[e(d,{prop:"item",label:"项目"}),e(d,{prop:"amount",label:"金额"}),e(d,{prop:"direction",label:"流向"})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})])),[[H,h.value]])}}}),ue=L(de,[["__scopeId","data-v-3bb3d7aa"]]);export{ue as default};
