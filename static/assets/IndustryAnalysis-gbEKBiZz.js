import{d as U,a as m,B as v,C as j,c as b,b as s,g as x,e as n,w as l,i as u,t as o,k as I,D as y,u as T,o as C,_ as q}from"./index-BRQ1HDww.js";import{f as G}from"./industryApi-CWVZ2pPW.js";const H={class:"industry-analysis"},J={class:"stats-section"},K={class:"stat-number"},L={class:"stat-number"},O={class:"stat-number"},Q={class:"stat-number"},W={class:"list-section"},X={class:"list-header"},Z={class:"list-actions"},tt={class:"result-count"},et={class:"table-container"},at={class:"industry-info"},st={class:"industry-name"},nt={class:"percentage-value"},lt={class:"value-badge"},ot={class:"value-badge"},rt={key:0,class:"pagination-container"},it={key:0,class:"loading-overlay"},dt=U({__name:"IndustryAnalysis",setup(ut){const i=m([]),h=m(!1),c=m(1),_=m(12),k=T(),f=v(()=>i.value.length),p=v(()=>i.value.reduce((e,a)=>e+a.count,0)),z=v(()=>f.value>0?Math.round(p.value/f.value):0),D=v(()=>i.value.reduce((e,a)=>a.count>e.count?a:e,{industry:"",count:0,stocks:[]})),P=v(()=>Math.ceil(i.value.length/_.value)),R=v(()=>{const e=(c.value-1)*_.value,a=e+_.value;return i.value.slice(e,a)});v(()=>{const e=[],a=Math.max(1,c.value-2),g=Math.min(P.value,c.value+2);for(let d=a;d<=g;d++)e.push(d);return e});const N=async()=>{h.value=!0;try{const e=await G();i.value=e}catch(e){console.error("获取行业数据错误:",e)}finally{h.value=!1}},S=e=>p.value>0?(e/p.value*100).toFixed(1):"0.0",w=e=>{if(e==null)return"0.00%";const a=e.toFixed(2);return e>0?`+${a}%`:`${a}%`},B=e=>{_.value=e,c.value=1},M=e=>{c.value=e},V=e=>{k.push({name:"industry-detail",params:{industry:encodeURIComponent(e.industry)}})};return j(()=>{N()}),(e,a)=>{const g=u("el-card"),d=u("el-col"),Y=u("el-row"),r=u("el-table-column"),A=u("el-tag"),F=u("el-button"),$=u("el-table"),E=u("el-pagination");return C(),b("div",H,[s("div",J,[n(Y,{gutter:20,class:"stats-grid"},{default:l(()=>[n(d,{xs:12,sm:6,md:6,lg:6},{default:l(()=>[n(g,{class:"stat-card",shadow:"hover"},{default:l(()=>[s("div",K,o(f.value),1),a[1]||(a[1]=s("div",{class:"stat-label"},"行业总数",-1))]),_:1})]),_:1}),n(d,{xs:12,sm:6,md:6,lg:6},{default:l(()=>[n(g,{class:"stat-card",shadow:"hover"},{default:l(()=>[s("div",L,o(p.value),1),a[2]||(a[2]=s("div",{class:"stat-label"},"股票总数",-1))]),_:1})]),_:1}),n(d,{xs:12,sm:6,md:6,lg:6},{default:l(()=>[n(g,{class:"stat-card",shadow:"hover"},{default:l(()=>[s("div",O,o(z.value),1),a[3]||(a[3]=s("div",{class:"stat-label"},"平均行业股票数",-1))]),_:1})]),_:1}),n(d,{xs:12,sm:6,md:6,lg:6},{default:l(()=>[n(g,{class:"stat-card",shadow:"hover"},{default:l(()=>[s("div",Q,o(D.value?.count||0),1),a[4]||(a[4]=s("div",{class:"stat-label"},"最大行业股票数",-1))]),_:1})]),_:1})]),_:1})]),s("div",W,[s("div",X,[a[5]||(a[5]=s("h2",null,"行业分类详情",-1)),s("div",Z,[s("span",tt," 共找到 "+o(i.value.length)+" 个行业 ",1)])]),s("div",et,[n($,{data:R.value,style:{width:"100%"},stripe:"",border:"",loading:h.value,"empty-text":"暂无行业数据"},{default:l(()=>[n(r,{prop:"industry",label:"行业名称",width:"120"},{default:l(t=>[s("div",at,[s("span",st,o(t.row.industry),1)])]),_:1}),n(r,{prop:"count",label:"股票数量",width:"120",align:"center",sortable:""},{default:l(t=>[n(A,{type:"info",size:"small"},{default:l(()=>[I(o(t.row.count),1)]),_:2},1024)]),_:1}),n(r,{label:"市场占比",width:"120",align:"center",sortable:""},{default:l(t=>[s("span",nt,o(S(t.row.count))+"%",1)]),_:1}),n(r,{prop:"avgChangePercent",label:"行业平均涨跌幅",width:"200",align:"center",sortable:""},{default:l(t=>[s("span",{class:y(["change-value",{positive:t.row.avgChangePercent>0,negative:t.row.avgChangePercent<0,neutral:t.row.avgChangePercent===0}])},o(w(t.row.avgChangePercent)),3)]),_:1}),n(r,{prop:"avgPeRatio",label:"平均PE",width:"100",align:"center"},{default:l(t=>[s("span",lt,o(t.row.avgPeRatio?t.row.avgPeRatio.toFixed(2):"N/A"),1)]),_:1}),n(r,{prop:"avgPbRatio",label:"平均PB",width:"100",align:"center"},{default:l(t=>[s("span",ot,o(t.row.avgPbRatio?t.row.avgPbRatio.toFixed(2):"N/A"),1)]),_:1}),n(r,{prop:"avgChange60Day",label:"60天涨跌幅",width:"120",align:"center"},{default:l(t=>[s("span",{class:y(["change-value",{positive:t.row.avgChange60Day>0,negative:t.row.avgChange60Day<0,neutral:t.row.avgChange60Day===0}])},o(w(t.row.avgChange60Day)),3)]),_:1}),n(r,{prop:"avgChangeYtd",label:"年初至今涨跌幅",width:"130",align:"center"},{default:l(t=>[s("span",{class:y(["change-value",{positive:t.row.avgChangeYtd>0,negative:t.row.avgChangeYtd<0,neutral:t.row.avgChangeYtd===0}])},o(w(t.row.avgChangeYtd)),3)]),_:1}),n(r,{label:"操作",width:"120",align:"center",fixed:"right"},{default:l(t=>[n(F,{type:"primary",size:"small",onClick:ct=>V(t.row)},{default:l(()=>[...a[6]||(a[6]=[I(" 查看详情 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","loading"])]),P.value>1?(C(),b("div",rt,[n(E,{"current-page":c.value,"onUpdate:currentPage":a[0]||(a[0]=t=>c.value=t),"page-size":_.value,total:i.value.length,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:M},null,8,["current-page","page-size","total"])])):x("",!0)]),h.value?(C(),b("div",it,[...a[7]||(a[7]=[s("div",{class:"loading-spinner"},null,-1),s("div",{class:"loading-text"},"正在加载行业数据...",-1)])])):x("",!0)])}}}),_t=q(dt,[["__scopeId","data-v-5329e6da"]]);export{_t as default};
