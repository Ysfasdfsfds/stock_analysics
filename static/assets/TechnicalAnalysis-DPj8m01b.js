import{d as P,a as u,r as E,B as O,C as Q,c as v,e,w as l,i as n,b as o,l as C,x as $,t as d,k as p,D as U,F as q,A as G,g as H,J as W,N as X,o as m,f as Y,_ as Z}from"./index-BRQ1HDww.js";import{b as ee}from"./stockApi-Cmsf5YCS.js";const le={class:"technical-analysis"},te={class:"card-header"},ae={class:"analysis-content"},oe={class:"chart-placeholder"},ne={key:0},se={key:1,class:"selected-stock-info"},de={class:"indicators"},ie={class:"signals"},ce={class:"stock-picker-dialog"},re={key:0,style:{"margin-top":"20px","text-align":"center"}},ue=P({__name:"TechnicalAnalysis",setup(pe){const i=u(null),h=u(!1),g=u([]),b=u(!1),_=u(""),r=E({macd:!0,rsi:!1,kdj:!0,boll:!1}),B=u([{id:1,time:"2024-01-15 14:30:00",type:"success",content:"MACD金叉信号出现，建议买入"},{id:2,time:"2024-01-14 10:15:00",type:"warning",content:"RSI超买警告，注意风险"},{id:3,time:"2024-01-13 09:45:00",type:"info",content:"KDJ指标显示超卖状态"}]),F=u([{date:"2024-01-15",open:15.2,close:15.85,high:15.9,low:15.1,volume:125e4,change:"+4.28%"},{date:"2024-01-14",open:14.95,close:15.2,high:15.35,low:14.8,volume:98e4,change:"+1.67%"},{date:"2024-01-13",open:15.5,close:14.95,high:15.6,low:14.85,volume:11e5,change:"-3.55%"}]),z=O(()=>_.value?g.value.filter(c=>c.code.includes(_.value.toUpperCase())||c.name.includes(_.value)).slice(0,50):g.value.slice(0,50)),A=async()=>{h.value=!0,g.value.length===0&&await N()},N=async()=>{b.value=!0;try{const c=await ee();g.value=c}catch(c){console.error("加载股票列表失败:",c)}finally{b.value=!1}},S=c=>{i.value=c,h.value=!1,_.value="",console.log("选择了股票:",c)},I=()=>{},K=()=>{console.log("刷新数据...")};return Q(()=>{}),(c,t)=>{const V=n("el-button"),x=n("el-icon"),f=n("el-card"),w=n("el-col"),y=n("el-switch"),k=n("el-form-item"),j=n("el-form"),J=n("el-timeline-item"),M=n("el-timeline"),D=n("el-row"),s=n("el-table-column"),L=n("el-table"),R=n("el-input"),T=n("el-dialog");return m(),v("div",le,[e(f,{class:"page-header"},{header:l(()=>[o("div",te,[t[7]||(t[7]=o("span",null,"技术分析",-1)),e(V,{type:"primary",onClick:K},{default:l(()=>[...t[6]||(t[6]=[p("刷新数据",-1)])]),_:1})])]),default:l(()=>[o("div",ae,[e(D,{gutter:20},{default:l(()=>[e(w,{span:8},{default:l(()=>[e(f,{class:"analysis-card"},{header:l(()=>[...t[8]||(t[8]=[o("span",null,"K线图",-1)])]),default:l(()=>[o("div",oe,[e(x,{size:"48"},{default:l(()=>[e(C($))]),_:1}),i.value?(m(),v("div",se,[o("h3",null,d(i.value.name)+" ("+d(i.value.code)+")",1),o("p",null,[p("最新价："+d(i.value.latest_price)+" ",1),o("span",{class:U({positive:i.value.change_percent>0,negative:i.value.change_percent<0})},d(i.value.change_percent>0?"+":"")+d(i.value.change_percent)+"% ",3)])])):(m(),v("p",ne,"K线图区域")),e(V,{type:"primary",size:"small",onClick:A},{default:l(()=>[p(d(i.value?"更换股票":"选择股票"),1)]),_:1})])]),_:1})]),_:1}),e(w,{span:8},{default:l(()=>[e(f,{class:"analysis-card"},{header:l(()=>[...t[9]||(t[9]=[o("span",null,"技术指标",-1)])]),default:l(()=>[o("div",de,[e(j,{model:r,"label-width":"100px"},{default:l(()=>[e(k,{label:"MACD"},{default:l(()=>[e(y,{modelValue:r.macd,"onUpdate:modelValue":t[0]||(t[0]=a=>r.macd=a)},null,8,["modelValue"])]),_:1}),e(k,{label:"RSI"},{default:l(()=>[e(y,{modelValue:r.rsi,"onUpdate:modelValue":t[1]||(t[1]=a=>r.rsi=a)},null,8,["modelValue"])]),_:1}),e(k,{label:"KDJ"},{default:l(()=>[e(y,{modelValue:r.kdj,"onUpdate:modelValue":t[2]||(t[2]=a=>r.kdj=a)},null,8,["modelValue"])]),_:1}),e(k,{label:"BOLL"},{default:l(()=>[e(y,{modelValue:r.boll,"onUpdate:modelValue":t[3]||(t[3]=a=>r.boll=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1}),e(w,{span:8},{default:l(()=>[e(f,{class:"analysis-card"},{header:l(()=>[...t[10]||(t[10]=[o("span",null,"交易信号",-1)])]),default:l(()=>[o("div",ie,[e(M,null,{default:l(()=>[(m(!0),v(q,null,G(B.value,a=>(m(),Y(J,{key:a.id,timestamp:a.time,type:a.type},{default:l(()=>[p(d(a.content),1)]),_:2},1032,["timestamp","type"]))),128))]),_:1})])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20,class:"mt-20"},{default:l(()=>[e(w,{span:24},{default:l(()=>[e(f,null,{header:l(()=>[...t[11]||(t[11]=[o("span",null,"历史数据",-1)])]),default:l(()=>[e(L,{data:F.value,style:{width:"100%"}},{default:l(()=>[e(s,{prop:"date",label:"日期",width:"120"}),e(s,{prop:"open",label:"开盘价",width:"100"}),e(s,{prop:"close",label:"收盘价",width:"100"}),e(s,{prop:"high",label:"最高价",width:"100"}),e(s,{prop:"low",label:"最低价",width:"100"}),e(s,{prop:"volume",label:"成交量",width:"100"}),e(s,{prop:"change",label:"涨跌幅"})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])]),_:1}),e(T,{modelValue:h.value,"onUpdate:modelValue":t[5]||(t[5]=a=>h.value=a),title:"选择股票",width:"80%","close-on-click-modal":!1},{default:l(()=>[o("div",ce,[e(R,{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=a=>_.value=a),placeholder:"输入股票代码或名称搜索...",size:"large",clearable:"",onInput:I},{prefix:l(()=>[e(x,null,{default:l(()=>[e(C(W))]),_:1})]),_:1},8,["modelValue"]),e(L,{data:z.value,style:{width:"100%","margin-top":"20px"},"max-height":"400",onRowClick:S},{default:l(()=>[e(s,{prop:"code",label:"股票代码",width:"120"}),e(s,{prop:"name",label:"股票名称",width:"150"}),e(s,{prop:"latest_price",label:"最新价",width:"100"},{default:l(a=>[p(d(a.row.latest_price?.toFixed(2)||"--"),1)]),_:1}),e(s,{prop:"change_percent",label:"涨跌幅",width:"120"},{default:l(a=>[o("span",{class:U({positive:a.row.change_percent>0,negative:a.row.change_percent<0})},d(a.row.change_percent>0?"+":"")+d(a.row.change_percent?.toFixed(2)||"--")+"% ",3)]),_:1}),e(s,{prop:"turnover_rate",label:"换手率",width:"100"},{default:l(a=>[p(d(a.row.turnover_rate?.toFixed(2)||"--")+"% ",1)]),_:1}),e(s,{label:"操作",width:"80"},{default:l(a=>[e(V,{type:"primary",size:"small",onClick:_e=>S(a.row)},{default:l(()=>[...t[12]||(t[12]=[p("选择",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),b.value?(m(),v("div",re,[e(x,{class:"is-loading"},{default:l(()=>[e(C(X))]),_:1}),t[13]||(t[13]=o("span",{style:{"margin-left":"10px"}},"加载股票数据中...",-1))])):H("",!0)])]),_:1},8,["modelValue"])])}}}),ve=Z(ue,[["__scopeId","data-v-d5c02ada"]]);export{ve as default};
